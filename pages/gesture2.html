<html>
	<head>
		<title></title>
		<script src="js/jquery.js"></script>
		<script src="js/jquery-ui.js"></script>
		<script src="js/nexusUI.js"></script>
	</head>
	<body>

		<style>

		body {
			font-family: helvetica neue;
		}

		#vis {
			height: 10px;
			width: 10px;
			position:absolute;
			top:0px;
			left:0px;
			background-color:black;
		}


		</style>


		<div id="vis"></div>


		<script>

			var Gesture = function(cb,xlow,xhigh,ylow,yhigh) {

				this.buffer = [
					[0,0],
					[.5,0],
					[0,.5],
					[1,1],
					[1,.75],
					[0,.2]
				]
			
			
		
				this.bufferIndex = 0
				this.speed = 1
				this.limit = 100

				this.cb = cb
				this.interval;

				this.scale = {
					x: [ xlow ? xlow : 0 , xhigh ? xhigh : 1 ]
					y: [ ylow ? ylow : 0 , yhigh ? yhigh : 1 ]
				}


				this.motor = setInterval(this.tick, 50);
				

			}

			Gesture.prototype.setBuffer = function(buff) {
				this.buffer = buff ? buff : this.buffer
				
			}

			Gesture.prototype.kill = function() {
				clearInterval(this.motor)
			}

			Gesture.prototype.tick = function() {

				this.bufferIndex += this.speed
				this.bufferIndex %= this.limit


				var interval = this.limit / this.buffer.length;

				var lowerIndex = Math.floor(this.bufferIndex/interval)
				var upperIndex = lowerIndex + 1

				upperIndex %= this.buffer.length

				var interpDistance = (this.bufferIndex - lowerIndex*interval) / interval

				var x = nx.interp(interpDistance, this.buffer[lowerIndex][0],this.buffer[upperIndex][0])
				var y = nx.interp(interpDistance, this.buffer[lowerIndex][1],this.buffer[upperIndex][1])

				x *= nx.scale(x,this.scale.x[0],this.scale.x[1])

				this.cb(x,y)

				//return value


				//how to teach a modulo?
				// 12 % 10 = 2
				// 22 % 10 = 2
				// a monster that can only eat 10 at a time. will chomp chomp until leaving whatever's left.

			}


			var box = {
				xx: "test",
				move: function(x,y) {
					$("#vis").css("left",x+"px")
					$("#vis").css("top",y+"px")
				}
			}

			var a = new Gesture(box.move.bind(box),100,100)



		
			
			/* a column of editable lines....

			8 4 hide show
			8 a line a grid 
			| hear pno
			| move 100 100

			or

			b(4,8,6).do(hide,show)
			b(2).do(piano.skip(r(100)),piano.stop)

			or

			wander by hand move A B
			wander by hand 0 20 0 20 move
			or
			piano move by hand
			and move by hand
			move by hand 0 20 0 20
			move by hand 20
			move by hand 20 20

				var a = new Gesture(piano.move.bind(piano),0,20,0,20)

			*/

		</script>


	</body>
</html>